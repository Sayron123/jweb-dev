/* HEXGATE i18n - English, 中文, 日本語, 한국어 */
window.I18N = {
    en: {
        nav: { home: 'Home', trend: 'Trend', clips: 'Clips Storage', about: 'About', settings: 'Settings', logout: 'Log Out' },
        search: { placeholder: 'Search IGN#Tag, Clips, or News...' },
        header: { online: 'ONLINE' },
        login: { subtitle: 'Inventory Access', google: 'Sign in with Google', facebook: 'Sign in with Facebook', riot: 'Sign in with Riot ID', secure: 'Secure Connection' },
        home: { patchNotes: 'PATCH NOTES', myInventory: 'MY INVENTORY', noClips: 'No clips uploaded yet.' },
        clips: { title: 'CLIPS STORAGE & INTEL' },
        about: {
            title: 'ABOUT HEXGATE',
            mission: 'HEXGATE is your central hub for Riot Games community highlights and patch intel. We help players store, share, and discover the best moments from League of Legends and Valorant—all in one place.',
            vision: 'Our mission is to keep the community connected with live patch updates and a shared archive of clips, so every player can learn and celebrate together.',
            support: { title: 'Community Support', desc: 'Get help and share feedback with the HEXGATE team and other players.' },
            secure: { title: 'Secure & Private', desc: 'Your data is protected. We follow best practices for security and privacy.' },
            global: { title: 'Global Access', desc: 'Use HEXGATE in your language. We support English, 中文, 日本語, and more.' }
        },
        settings: { title: 'SETTINGS', darkMode: 'Dark Mode', typography: 'Interface Typography', theme: 'Color Theme' },
        common: { loading: 'Loading...', success: 'Success', error: 'Error', warning: 'Warning', info: 'Info' }
    },
    zh: {
        nav: { home: '首页', trend: '趋势', clips: '片段库', about: '关于', settings: '设置', logout: '退出' },
        search: { placeholder: '搜索 IGN#Tag、片段或资讯...' },
        header: { online: '在线' },
        login: { subtitle: '库存访问', google: '使用 Google 登录', facebook: '使用 Facebook 登录', riot: '使用 Riot ID 登录', secure: '安全连接' },
        home: { patchNotes: '版本说明', myInventory: '我的库存', noClips: '暂无上传片段。' },
        clips: { title: '片段库与情报' },
        about: {
            title: '关于 HEXGATE',
            mission: 'HEXGATE 是拳头游戏社区精彩瞬间与版本情报的中心。我们帮助玩家存储、分享并发现英雄联盟与无畏契约中的高光时刻，一站搞定。',
            vision: '我们的使命是用实时版本更新与共享片段库连接社区，让每位玩家都能一起学习、一起庆祝。',
            support: { title: '社区支持', desc: '获取帮助并与 HEXGATE 团队及其他玩家分享反馈。' },
            secure: { title: '安全与隐私', desc: '您的数据受保护。我们遵循安全与隐私最佳实践。' },
            global: { title: '全球访问', desc: '用您的语言使用 HEXGATE。我们支持英语、中文、日语等。' }
        },
        settings: { title: '设置', darkMode: '深色模式', typography: '界面字体', theme: '颜色主题' },
        common: { loading: '加载中...', success: '成功', error: '错误', warning: '警告', info: '信息' }
    },
    ja: {
        nav: { home: 'ホーム', trend: 'トレンド', clips: 'クリップ保管', about: 'About', settings: '設定', logout: 'ログアウト' },
        search: { placeholder: 'IGN#Tag、クリップ、ニュースを検索...' },
        header: { online: 'オンライン' },
        login: { subtitle: 'インベントリアクセス', google: 'Googleでログイン', facebook: 'Facebookでログイン', riot: 'Riot IDでログイン', secure: 'セキュア接続' },
        home: { patchNotes: 'パッチノート', myInventory: 'マイインベントリ', noClips: 'まだクリップはアップロードされていません。' },
        clips: { title: 'クリップ保管と情報' },
        about: {
            title: 'HEXGATEについて',
            mission: 'HEXGATEは、Riot Gamesコミュニティのハイライトとパッチ情報のハブです。リーグ・オブ・レジェンドとヴァロラントの名シーンを保存・共有・発見できる場所を提供します。',
            vision: 'ライブパッチ更新と共有クリップアーカイブでコミュニティをつなぎ、すべてのプレイヤーが学び、祝い合えるようにするのが私たちの使命です。',
            support: { title: 'コミュニティサポート', desc: 'HEXGATEチームや他のプレイヤーにヘルプやフィードバックを共有できます。' },
            secure: { title: 'セキュア＆プライバシー', desc: 'データは保護されています。セキュリティとプライバシーのベストプラクティスに従っています。' },
            global: { title: 'グローバルアクセス', desc: 'お好みの言語でHEXGATEをご利用いただけます。英語、中文、日本語などに対応しています。' }
        },
        settings: { title: '設定', darkMode: 'ダークモード', typography: 'インターフェースフォント', theme: 'カラーテーマ' }
    },
    ko: {
        nav: { home: '홈', trend: '트렌드', clips: '클립 보관', about: '소개', settings: '설정', logout: '로그아웃' },
        search: { placeholder: 'IGN#Tag, 클립 또는 뉴스 검색...' },
        header: { online: '온라인' },
        login: { subtitle: '인벤토리 접속', google: 'Google로 로그인', facebook: 'Facebook으로 로그인', riot: 'Riot ID로 로그인', secure: '보안 연결' },
        home: { patchNotes: '패치 노트', myInventory: '내 인벤토리', noClips: '아직 업로드된 클립이 없습니다.' },
        clips: { title: '클립 보관 및 정보' },
        about: {
            title: 'HEXGATE 소개',
            mission: 'HEXGATE는 Riot Games 커뮤니티 하이라이트와 패치 정보의 허브입니다. 리그 오브 레전드와 발로란트의 명장면을 저장·공유·발견할 수 있는 공간을 제공합니다.',
            vision: '실시간 패치 업데이트와 공유 클립 아카이브로 커뮤니티를 연결하고, 모든 플레이어가 함께 배우고 축하할 수 있도록 하는 것이 우리의 미션입니다.',
            support: { title: '커뮤니티 지원', desc: 'HEXGATE 팀 및 다른 플레이어에게 도움을 요청하고 피드백을 공유하세요.' },
            secure: { title: '보안 및 개인정보', desc: '데이터는 보호됩니다. 보안 및 개인정보 보호 모범 사례를 따릅니다.' },
            global: { title: '글로벌 접근', desc: '원하는 언어로 HEXGATE를 이용하세요. 영어, 中文, 日本語 등 지원.' }
        },
        settings: { title: '설정', darkMode: '다크 모드', typography: '인터페이스 글꼴', theme: '색상 테마' },
        common: { loading: '로딩 중...', success: '성공', error: '오류', warning: '경고', info: '정보' }
    }
};

function getNested(obj, path) {
    return path.split('.').reduce((o, k) => (o && o[k] !== undefined ? o[k] : null), obj);
}

window.setLanguage = function(lang) {
    if (!window.I18N[lang]) lang = 'en';
    window._currentLang = lang;
    document.documentElement.lang = lang === 'zh' ? 'zh-Cn' : lang === 'ja' ? 'ja' : lang === 'ko' ? 'ko' : 'en';
    applyLanguage(lang);
    try { localStorage.setItem('hexgate-lang', lang); } catch (e) {}
};

function applyLanguage(lang) {
    const t = window.I18N[lang] || window.I18N.en;
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        const val = getNested(t, key);
        if (val != null) el.textContent = val;
    });
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        const val = getNested(t, key);
        if (val != null) el.placeholder = val;
    });
}

// Make applyLanguage globally available
window.applyLanguage = applyLanguage;

document.addEventListener('DOMContentLoaded', function() {
    const saved = typeof localStorage !== 'undefined' && localStorage.getItem('hexgate-lang');
    const lang = saved && window.I18N[saved] ? saved : 'en';
    window._currentLang = lang;
    const sel = document.getElementById('langSelect');
    if (sel) sel.value = lang;
    applyLanguage(lang);
});
